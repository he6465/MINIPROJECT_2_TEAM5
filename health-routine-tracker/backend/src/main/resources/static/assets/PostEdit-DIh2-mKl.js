import{f as b,g,r as c,h as M,j as e,B as h}from"./index-ooePGNJt.js";import{a as E,d as T}from"./queries-CI79Hc-w.js";import{I as i}from"./Input-DfTUmW9q.js";import{S as w}from"./Select-PR7ONlsF.js";import{T as j}from"./Textarea-DZrpOfxv.js";function L(){const{id:l}=b(),m=g(),[s,d]=c.useState(null),[p,v]=c.useState(null),{push:x}=M(),{data:t}=E(l??"");c.useEffect(()=>{t&&d({date:t.date,sleepHours:t.sleepHours,exerciseType:t.exerciseType,exerciseMinutes:t.exerciseMinutes,meals:t.meals,waterMl:t.waterMl,note:t.note})},[t]);const r=u=>{const{name:a,value:n}=u.target;d(f=>({...f??{date:""},[a]:a==="sleepHours"||a==="exerciseMinutes"||a==="waterMl"?n===""?void 0:Number(n):n}))},o=T(l??""),y=async u=>{if(u.preventDefault(),!(!l||!s))try{const a=await o.mutateAsync(s);x("수정이 저장되었습니다.","success"),m(`/posts/${a.id}`)}catch(a){const n=a?.message??"ERROR";v(n),x(n,"error")}};return s?e.jsxs("section",{children:[e.jsx("h2",{children:"루틴 수정"}),e.jsxs("form",{onSubmit:y,style:{display:"grid",gap:12,maxWidth:640},"aria-describedby":"edit-help",children:[e.jsx(i,{label:"날짜",name:"date",type:"date",value:s.date,onChange:r,required:!0}),e.jsx(i,{label:"수면 시간(시간)",name:"sleepHours",type:"number",min:0,max:16,step:.1,value:s.sleepHours??"",onChange:r}),e.jsxs(w,{label:"운동 종류",name:"exerciseType",value:s.exerciseType??"",onChange:r,children:[e.jsx("option",{value:"",children:"선택"}),e.jsx("option",{value:"WALK",children:"WALK"}),e.jsx("option",{value:"RUN",children:"RUN"}),e.jsx("option",{value:"GYM",children:"GYM"}),e.jsx("option",{value:"ETC",children:"ETC"})]}),e.jsx(i,{label:"운동 시간(분)",name:"exerciseMinutes",type:"number",min:0,max:600,step:1,value:s.exerciseMinutes??"",onChange:r}),e.jsx(j,{label:"식사 메모(0~1000자)",name:"meals",rows:4,maxLength:1e3,value:s.meals??"",onChange:r}),e.jsx(i,{label:"물 섭취량(ml)",name:"waterMl",type:"number",min:0,max:1e4,step:50,value:s.waterMl??"",onChange:r}),e.jsx(j,{label:"노트(0~1000자)",name:"note",rows:4,maxLength:1e3,value:s.note??"",onChange:r}),p&&e.jsx("div",{className:"card",style:{color:"#ef4444"},children:p}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsx(h,{type:"submit",disabled:o.isPending,children:o.isPending?"저장 중...":"저장"}),e.jsx(h,{variant:"ghost",type:"button",onClick:()=>m(-1),children:"취소"})]}),e.jsx("span",{id:"edit-help",className:"muted",style:{fontSize:12},children:"필드 변경 후 Enter로 제출할 수 있습니다."})]})]}):e.jsx("section",{className:"page",children:e.jsx("div",{className:"card",children:"불러오는 중..."})})}export{L as default};
