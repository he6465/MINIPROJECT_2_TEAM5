import{r as s,T as vt,U as mt,j as o,B as X}from"./index-BiuEXBLa.js";import{b as ft,c as ee,f as Z,d as q,u as He,e as k,p as le,g as yt,i as gt,s as V,h as ht,j as bt,k as Xe,l as Pt,m as xt,n as W,o as jt,q as ze,r as Ot,t as At,v as wt,x as Tt,y as St,z as Et,A as Ze,B as kt,D as oe,E as Je,F as Ct,J as Qe,G,H as Y,S as Dt,I as It,K as U,M as Rt,N as Nt,O as Lt,P as et,Q as _t,U as $t,V as tt,W as K,Y as Mt,Z as Kt,_ as Wt,$ as Bt,a0 as Te,a1 as te,a2 as me,a3 as Ft,a4 as Gt,a5 as Yt,a6 as Vt,a7 as qt,a8 as Ut,a9 as Ht,aa as z,ab as Xt,ac as zt,ad as Zt,ae as Jt,af as Qt,ag as er,ah as tr,ai as rr,aj as ar,ak as nr,al as ir,am as sr,an as lr,ao as or,ap as N,aq as cr,ar as Se,as as ur,at as dr,au as pr,av as vr,aw as mr,ax as fr,w as yr,ay as gr,R as Ee,L as hr,C as br,X as Pr,T as ke,a as Ce}from"./stats-C7P23gVP.js";import{S as xr}from"./Section-Bv8RRGML.js";import{a as jr,E as De}from"./State-Cp6dggS1.js";import"./format-Cc2PyARz.js";import"./startOfMonth-xYZtRiky.js";const rt=Math.cos,re=Math.sin,L=Math.sqrt,ae=Math.PI,ce=2*ae,be={draw(e,r){const t=L(r/ae);e.moveTo(t,0),e.arc(0,0,t,0,ce)}},Or={draw(e,r){const t=L(r/5)/2;e.moveTo(-3*t,-t),e.lineTo(-t,-t),e.lineTo(-t,-3*t),e.lineTo(t,-3*t),e.lineTo(t,-t),e.lineTo(3*t,-t),e.lineTo(3*t,t),e.lineTo(t,t),e.lineTo(t,3*t),e.lineTo(-t,3*t),e.lineTo(-t,t),e.lineTo(-3*t,t),e.closePath()}},at=L(1/3),Ar=at*2,wr={draw(e,r){const t=L(r/Ar),a=t*at;e.moveTo(0,-t),e.lineTo(a,0),e.lineTo(0,t),e.lineTo(-a,0),e.closePath()}},Tr={draw(e,r){const t=L(r),a=-t/2;e.rect(a,a,t,t)}},Sr=.8908130915292852,nt=re(ae/10)/re(7*ae/10),Er=re(ce/10)*nt,kr=-rt(ce/10)*nt,Cr={draw(e,r){const t=L(r*Sr),a=Er*t,n=kr*t;e.moveTo(0,-t),e.lineTo(a,n);for(let i=1;i<5;++i){const l=ce*i/5,u=rt(l),m=re(l);e.lineTo(m*t,-u*t),e.lineTo(u*a-m*n,m*a+u*n)}e.closePath()}},de=L(3),Dr={draw(e,r){const t=-L(r/(de*3));e.moveTo(0,t*2),e.lineTo(-de*t,-t),e.lineTo(de*t,-t),e.closePath()}},C=-.5,D=L(3)/2,fe=1/L(12),Ir=(fe/2+1)*3,Rr={draw(e,r){const t=L(r/Ir),a=t/2,n=t*fe,i=a,l=t*fe+t,u=-i,m=l;e.moveTo(a,n),e.lineTo(i,l),e.lineTo(u,m),e.lineTo(C*a-D*n,D*a+C*n),e.lineTo(C*i-D*l,D*i+C*l),e.lineTo(C*u-D*m,D*u+C*m),e.lineTo(C*a+D*n,C*n-D*a),e.lineTo(C*i+D*l,C*l-D*i),e.lineTo(C*u+D*m,C*m-D*u),e.closePath()}};function Nr(e,r){let t=null,a=ft(n);e=typeof e=="function"?e:ee(e||be),r=typeof r=="function"?r:ee(r===void 0?64:+r);function n(){let i;if(t||(t=i=a()),e.apply(this,arguments).draw(t,+r.apply(this,arguments)),i)return t=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:ee(i),n):e},n.size=function(i){return arguments.length?(r=typeof i=="function"?i:ee(+i),n):r},n.context=function(i){return arguments.length?(t=i??null,n):t},n}var Lr=["type","size","sizeType"];function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ye.apply(null,arguments)}function Ie(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function Re(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ie(Object(t),!0).forEach(function(a){_r(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ie(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function _r(e,r,t){return(r=$r(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function $r(e){var r=Mr(e,"string");return typeof r=="symbol"?r:r+""}function Mr(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Kr(e,r){if(e==null)return{};var t,a,n=Wr(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Wr(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}var it={symbolCircle:be,symbolCross:Or,symbolDiamond:wr,symbolSquare:Tr,symbolStar:Cr,symbolTriangle:Dr,symbolWye:Rr},Br=Math.PI/180,Fr=e=>{var r="symbol".concat(He(e));return it[r]||be},Gr=(e,r,t)=>{if(r==="area")return e;switch(t){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Br;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Yr=(e,r)=>{it["symbol".concat(He(e))]=r},st=e=>{var{type:r="circle",size:t=64,sizeType:a="area"}=e,n=Kr(e,Lr),i=Re(Re({},n),{},{type:r,size:t,sizeType:a}),l="circle";typeof r=="string"&&(l=r);var u=()=>{var y=Fr(l),c=Nr().type(y).size(Gr(t,a,l));return c()},{className:m,cx:d,cy:g}=i,h=Z(i,!0);return d===+d&&g===+g&&t===+t?s.createElement("path",ye({},h,{className:q("recharts-symbols",m),transform:"translate(".concat(d,", ").concat(g,")"),d:u()})):null};st.registerSymbol=Yr;var ue=e=>null;ue.displayName="Cell";var lt=e=>e.graphicalItems.polarItems,Vr=k([le,yt],gt),Pe=k([lt,V,Vr],ht),qr=k([Pe],bt),xe=k([qr,Xe],Pt),Ur=k([xe,V,Pe],xt),Hr=k([xe,V,Pe],(e,r,t)=>t.length>0?e.flatMap(a=>t.flatMap(n=>{var i,l=W(a,(i=r.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):r?.dataKey!=null?e.map(a=>({value:W(a,r.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),Ne=()=>{},Xr=k([V,jt,Ne,Hr,Ne,ze,le],Ot),ot=k([V,ze,xe,Ur,At,le,Xr],wt),zr=k([ot,V,Tt],St);k([V,ot,zr,le],Et);function Le(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function _e(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Le(Object(t),!0).forEach(function(a){Zr(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Le(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Zr(e,r,t){return(r=Jr(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Jr(e){var r=Qr(e,"string");return typeof r=="symbol"?r:r+""}function Qr(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var ea=(e,r)=>r,je=k([lt,ea],(e,r)=>e.filter(t=>t.type==="pie").find(t=>t.id===r)),ta=[],Oe=(e,r,t)=>t?.length===0?ta:t,ct=k([Xe,je,Oe],(e,r,t)=>{var{chartData:a}=e;if(r!=null){var n;if(r?.data!=null&&r.data.length>0?n=r.data:n=a,(!n||!n.length)&&t!=null&&(n=t.map(i=>_e(_e({},r.presentationProps),i.props))),n!=null)return n}}),ra=k([ct,je,Oe],(e,r,t)=>{if(!(e==null||r==null))return e.map((a,n)=>{var i,l=W(a,r.nameKey,r.name),u;return t!=null&&(i=t[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?u=t[n].props.fill:typeof a=="object"&&a!=null&&"fill"in a?u=a.fill:u=r.fill,{value:Ze(l,r.dataKey),color:u,payload:a,type:r.legendType}})}),aa=k([ct,je,Oe,kt],(e,r,t,a)=>{if(!(r==null||e==null))return Va({offset:a,pieSettings:r,displayedData:e,cells:t})}),pe={},$e;function na(){return $e||($e=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a}e.isPlainObject=r})(pe)),pe}var ve,Me;function ia(){return Me||(Me=1,ve=na().isPlainObject),ve}var sa=ia();const la=vt(sa);function Ke(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function We(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ke(Object(t),!0).forEach(function(a){oa(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function oa(e,r,t){return(r=ca(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ca(e){var r=ua(e,"string");return typeof r=="symbol"?r:r+""}function ua(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ne.apply(null,arguments)}var Be=(e,r,t,a,n)=>{var i=t-a,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+t,",").concat(r),l+="L ".concat(e+t-i/2,",").concat(r+n),l+="L ".concat(e+t-i/2-a,",").concat(r+n),l+="L ".concat(e,",").concat(r," Z"),l},da={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pa=e=>{var r=oe(e,da),{x:t,y:a,upperWidth:n,lowerWidth:i,height:l,className:u}=r,{animationEasing:m,animationDuration:d,animationBegin:g,isUpdateAnimationActive:h}=r,y=s.useRef(),[c,x]=s.useState(-1),p=s.useRef(n),P=s.useRef(i),w=s.useRef(l),T=s.useRef(t),j=s.useRef(a),S=Je(e,"trapezoid-");if(s.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var E=y.current.getTotalLength();E&&x(E)}catch{}},[]),t!==+t||a!==+a||n!==+n||i!==+i||l!==+l||n===0&&i===0||l===0)return null;var A=q("recharts-trapezoid",u);if(!h)return s.createElement("g",null,s.createElement("path",ne({},Z(r,!0),{className:A,d:Be(t,a,n,i,l)})));var v=p.current,f=P.current,b=w.current,I=T.current,R=j.current,_="0px ".concat(c===-1?1:c,"px"),$="".concat(c,"px 0px"),F=Ct(["strokeDasharray"],d,m);return s.createElement(Qe,{animationId:S,key:S,canBegin:c>0,duration:d,easing:m,isActive:h,begin:g},E=>{var M=G(v,n,E),H=G(f,i,E),J=G(b,l,E),Q=G(I,t,E),we=G(R,a,E);y.current&&(p.current=M,P.current=H,w.current=J,T.current=Q,j.current=we);var pt=E>0?{transition:F,strokeDasharray:$}:{strokeDasharray:_};return s.createElement("path",ne({},Z(r,!0),{className:A,d:Be(Q,we,M,H,J),ref:y,style:We(We({},pt),r.style)}))})},va=["option","shapeType","propTransformer","activeClassName","isActive"];function ma(e,r){if(e==null)return{};var t,a,n=fa(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function fa(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}function Fe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function ie(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Fe(Object(t),!0).forEach(function(a){ya(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fe(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function ya(e,r,t){return(r=ga(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ga(e){var r=ha(e,"string");return typeof r=="symbol"?r:r+""}function ha(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ba(e,r){return ie(ie({},r),e)}function Pa(e,r){return e==="symbols"}function Ge(e){var{shapeType:r,elementProps:t}=e;switch(r){case"rectangle":return s.createElement(It,t);case"trapezoid":return s.createElement(pa,t);case"sector":return s.createElement(Dt,t);case"symbols":if(Pa(r))return s.createElement(st,t);break;default:return null}}function xa(e){return s.isValidElement(e)?e.props:e}function ja(e){var{option:r,shapeType:t,propTransformer:a=ba,activeClassName:n="recharts-active-shape",isActive:i}=e,l=ma(e,va),u;if(s.isValidElement(r))u=s.cloneElement(r,ie(ie({},l),xa(r)));else if(typeof r=="function")u=r(l);else if(la(r)&&typeof r!="boolean"){var m=a(r,l);u=s.createElement(Ge,{shapeType:t,elementProps:m})}else{var d=l;u=s.createElement(Ge,{shapeType:t,elementProps:d})}return i?s.createElement(Y,{className:n},u):u}var Oa=(e,r)=>{var t=U();return(a,n)=>i=>{e?.(a,n,i),t(Rt({activeIndex:String(n),activeDataKey:r,activeCoordinate:a.tooltipPosition}))}},Aa=e=>{var r=U();return(t,a)=>n=>{e?.(t,a,n),r(Nt())}},wa=(e,r)=>{var t=U();return(a,n)=>i=>{e?.(a,n,i),t(Lt({activeIndex:String(n),activeDataKey:r,activeCoordinate:a.tooltipPosition}))}},Ta=["onMouseEnter","onClick","onMouseLeave"],Sa=["id"],Ea=["id"];function Ae(e,r){if(e==null)return{};var t,a,n=ka(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function ka(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}function Ye(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ye(Object(t),!0).forEach(function(a){Ca(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ye(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Ca(e,r,t){return(r=Da(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Da(e){var r=Ia(e,"string");return typeof r=="symbol"?r:r+""}function Ia(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},B.apply(null,arguments)}function Ra(e){var r=s.useMemo(()=>tt(e.children,ue),[e.children]),t=K(a=>ra(a,e.id,r));return t==null?null:s.createElement(Mt,{legendPayload:t})}function Na(e){var{dataKey:r,nameKey:t,sectors:a,stroke:n,strokeWidth:i,fill:l,name:u,hide:m,tooltipType:d}=e;return{dataDefinedOnItem:a.map(g=>g.tooltipPayload),positions:a.map(g=>g.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:l,dataKey:r,nameKey:t,name:Ze(u,r),hide:m,type:d,color:l,unit:""}}}var La=(e,r)=>e>r?"start":e<r?"end":"middle",_a=(e,r,t)=>typeof r=="function"?z(r(e),t,t*.8):z(r,t,t*.8),$a=(e,r,t)=>{var{top:a,left:n,width:i,height:l}=r,u=Ht(i,l),m=n+z(e.cx,i,i/2),d=a+z(e.cy,l,l/2),g=z(e.innerRadius,u,0),h=_a(t,e.outerRadius,u),y=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:m,cy:d,innerRadius:g,outerRadius:h,maxRadius:y}},Ma=(e,r)=>{var t=te(r-e),a=Math.min(Math.abs(r-e),360);return t*a};function Ka(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Wa=(e,r)=>{if(s.isValidElement(e))return s.cloneElement(e,r);if(typeof e=="function")return e(r);var t=q("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return s.createElement(Xt,B({},r,{type:"linear",className:t}))},Ba=(e,r,t)=>{if(s.isValidElement(e))return s.cloneElement(e,r);var a=t;if(typeof e=="function"&&(a=e(r),s.isValidElement(a)))return a;var n=q("recharts-pie-label-text",Ka(e));return s.createElement(zt,B({},r,{alignmentBaseline:"middle",className:n}),a)};function Fa(e){var{sectors:r,props:t,showLabels:a}=e,{label:n,labelLine:i,dataKey:l}=t;if(!a||!n||!r)return null;var u=et(t),m=Z(n,!1),d=Z(i,!1),g=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,h=r.map((y,c)=>{var x=(y.startAngle+y.endAngle)/2,p=me(y.cx,y.cy,y.outerRadius+g,x),P=O(O(O(O({},u),y),{},{stroke:"none"},m),{},{index:c,textAnchor:La(p.x,y.cx)},p),w=O(O(O(O({},u),y),{},{fill:"none",stroke:y.fill},d),{},{index:c,points:[me(y.cx,y.cy,y.outerRadius,x),p],key:"line"});return s.createElement(Y,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(c)},i&&Wa(i,w),Ba(n,P,W(y,l)))});return s.createElement(Y,{className:"recharts-pie-labels"},h)}function Ga(e){var{sectors:r,props:t,showLabels:a}=e,{label:n}=t;return typeof n=="object"&&n!=null&&"position"in n?s.createElement(Ut,{label:t.label}):s.createElement(Fa,{sectors:r,props:t,showLabels:a})}function Ya(e){var{sectors:r,activeShape:t,inactiveShape:a,allOtherPieProps:n}=e,i=K(Gt),{onMouseEnter:l,onClick:u,onMouseLeave:m}=n,d=Ae(n,Ta),g=Oa(l,n.dataKey),h=Aa(m),y=wa(u,n.dataKey);return r==null||r.length===0?null:s.createElement(s.Fragment,null,r.map((c,x)=>{if(c?.startAngle===0&&c?.endAngle===0&&r.length!==1)return null;var p=t&&String(x)===i,P=i?a:null,w=p?t:P,T=O(O({},c),{},{stroke:c.stroke,tabIndex:-1,[Vt]:x,[Yt]:n.dataKey});return s.createElement(Y,B({tabIndex:-1,className:"recharts-pie-sector"},qt(d,c,x),{onMouseEnter:g(c,x),onMouseLeave:h(c,x),onClick:y(c,x),key:"sector-".concat(c?.startAngle,"-").concat(c?.endAngle,"-").concat(c.midAngle,"-").concat(x)}),s.createElement(ja,B({option:w,isActive:p,shapeType:"sector"},T)))}))}function Va(e){var r,{pieSettings:t,displayedData:a,cells:n,offset:i}=e,{cornerRadius:l,startAngle:u,endAngle:m,dataKey:d,nameKey:g,tooltipType:h}=t,y=Math.abs(t.minAngle),c=Ma(u,m),x=Math.abs(c),p=a.length<=1?0:(r=t.paddingAngle)!==null&&r!==void 0?r:0,P=a.filter(v=>W(v,d,0)!==0).length,w=(x>=360?P:P-1)*p,T=x-P*y-w,j=a.reduce((v,f)=>{var b=W(f,d,0);return v+(Te(b)?b:0)},0),S;if(j>0){var A;S=a.map((v,f)=>{var b=W(v,d,0),I=W(v,g,f),R=$a(t,i,v),_=(Te(b)?b:0)/j,$,F=O(O({},v),n&&n[f]&&n[f].props);f?$=A.endAngle+te(c)*p*(b!==0?1:0):$=u;var E=$+te(c)*((b!==0?y:0)+_*T),M=($+E)/2,H=(R.innerRadius+R.outerRadius)/2,J=[{name:I,value:b,payload:F,dataKey:d,type:h}],Q=me(R.cx,R.cy,H,M);return A=O(O(O(O({},t.presentationProps),{},{percent:_,cornerRadius:l,name:I,tooltipPayload:J,midAngle:M,middleRadius:H,tooltipPosition:Q},F),R),{},{value:W(v,d),startAngle:$,endAngle:E,payload:F,paddingAngle:te(c)*p}),A})}return S}function qa(e){var{showLabels:r,sectors:t,children:a}=e,n=s.useMemo(()=>!r||!t?[]:t.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[t,r]);return s.createElement(Ft,{value:r?n:void 0},a)}function Ua(e){var{props:r,previousSectorsRef:t}=e,{sectors:a,isAnimationActive:n,animationBegin:i,animationDuration:l,animationEasing:u,activeShape:m,inactiveShape:d,onAnimationStart:g,onAnimationEnd:h}=r,y=Je(r,"recharts-pie-"),c=t.current,[x,p]=s.useState(!1),P=s.useCallback(()=>{typeof h=="function"&&h(),p(!1)},[h]),w=s.useCallback(()=>{typeof g=="function"&&g(),p(!0)},[g]);return s.createElement(qa,{showLabels:!x,sectors:a},s.createElement(Qe,{animationId:y,begin:i,duration:l,isActive:n,easing:u,onAnimationStart:w,onAnimationEnd:P,key:y},T=>{var j=[],S=a&&a[0],A=S?.startAngle;return a?.forEach((v,f)=>{var b=c&&c[f],I=f>0?Bt(v,"paddingAngle",0):0;if(b){var R=G(b.endAngle-b.startAngle,v.endAngle-v.startAngle,T),_=O(O({},v),{},{startAngle:A+I,endAngle:A+R+I});j.push(_),A=_.endAngle}else{var{endAngle:$,startAngle:F}=v,E=G(0,$-F,T),M=O(O({},v),{},{startAngle:A+I,endAngle:A+E+I});j.push(M),A=M.endAngle}}),t.current=j,s.createElement(Y,null,s.createElement(Ya,{sectors:j,activeShape:m,inactiveShape:d,allOtherPieProps:r}))}),s.createElement(Ga,{showLabels:!x,sectors:a,props:r}),r.children)}var Ha={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Wt.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Xa(e){var{id:r}=e,t=Ae(e,Sa),{hide:a,className:n,rootTabIndex:i}=e,l=s.useMemo(()=>tt(e.children,ue),[e.children]),u=K(g=>aa(g,r,l)),m=s.useRef(null),d=q("recharts-pie",n);return a||u==null?(m.current=null,s.createElement(Y,{tabIndex:i,className:d})):s.createElement(s.Fragment,null,s.createElement(Kt,{fn:Na,args:O(O({},e),{},{sectors:u})}),s.createElement(Y,{tabIndex:i,className:d},s.createElement(Ua,{props:O(O({},t),{},{sectors:u}),previousSectorsRef:m})))}function ut(e){var r=oe(e,Ha),{id:t}=r,a=Ae(r,Ea),n=et(a);return s.createElement(_t,{id:t,type:"pie"},i=>s.createElement(s.Fragment,null,s.createElement($t,{type:"pie",id:i,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:n}),s.createElement(Ra,B({},a,{id:i})),s.createElement(Xa,B({},a,{id:i}))))}ut.displayName="Pie";var za=e=>{var{ticks:r,label:t,labelGapWithTick:a=5,tickSize:n=0,tickMargin:i=0}=e,l=0;if(r){r.forEach(g=>{if(g){var h=g.getBoundingClientRect();h.width>l&&(l=h.width)}});var u=t?t.getBoundingClientRect().width:0,m=n+i,d=l+m+u+(t?a:0);return Math.round(d)}return 0},Za=["dangerouslySetInnerHTML","ticks"],Ja=["id"];function dt(e,r,t){return(r=Qa(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Qa(e){var r=en(e,"string");return typeof r=="symbol"?r:r+""}function en(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ge.apply(null,arguments)}function Ve(e,r){if(e==null)return{};var t,a,n=tn(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function tn(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}function rn(e){var r=U();return s.useEffect(()=>(r(Zt(e)),()=>{r(Jt(e))}),[e,r]),null}var an=e=>{var r,{yAxisId:t,className:a,width:n,label:i}=e,l=s.useRef(null),u=s.useRef(null),m=K(Qt),d=er(),g=U(),h="yAxis",y=K(v=>tr(v,h,t,d)),c=K(v=>rr(v,t)),x=K(v=>ar(v,t)),p=K(v=>nr(v,h,t,d)),P=K(v=>ir(v,t));if(s.useLayoutEffect(()=>{var v;if(!(n!=="auto"||!c||sr(i)||s.isValidElement(i)||P==null)){var f=l.current,b=f==null||(v=f.tickRefs)===null||v===void 0?void 0:v.current,{tickSize:I,tickMargin:R}=f.props,_=za({ticks:b,label:u.current,labelGapWithTick:5,tickSize:I,tickMargin:R});Math.round(c.width)!==Math.round(_)&&g(lr({id:t,width:_}))}},[l,l==null||(r=l.current)===null||r===void 0||(r=r.tickRefs)===null||r===void 0?void 0:r.current,c?.width,c,g,i,t,n]),c==null||x==null||P==null)return null;var{dangerouslySetInnerHTML:w,ticks:T}=e,j=Ve(e,Za),{id:S}=P,A=Ve(P,Ja);return s.createElement(or,ge({},j,A,{ref:l,labelRef:u,scale:y,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:c.width,height:c.height,className:q("recharts-".concat(h," ").concat(h),a),viewBox:m,ticks:p}))},nn=e=>{var r,t,a,n,i;return s.createElement(s.Fragment,null,s.createElement(rn,{interval:(r=e.interval)!==null&&r!==void 0?r:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(t=e.includeHidden)!==null&&t!==void 0?t:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),s.createElement(an,e))},sn={allowDataOverflow:N.allowDataOverflow,allowDecimals:N.allowDecimals,allowDuplicatedCategory:N.allowDuplicatedCategory,hide:!1,mirror:N.mirror,orientation:N.orientation,padding:N.padding,reversed:N.reversed,scale:N.scale,tickCount:N.tickCount,type:N.type,width:N.width,yAxisId:0};class se extends s.Component{render(){return s.createElement(nn,this.props)}}dt(se,"displayName","YAxis");dt(se,"defaultProps",sn);function ln(e){var r=U();return s.useEffect(()=>{r(cr(e))},[r,e]),null}var on=["width","height","layout"];function he(){return he=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},he.apply(null,arguments)}function cn(e,r){if(e==null)return{};var t,a,n=un(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function un(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}var dn={top:5,right:5,bottom:5,left:5},pn={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:dn,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},vn=s.forwardRef(function(r,t){var a,n=oe(r.categoricalChartProps,pn),{width:i,height:l,layout:u}=n,m=cn(n,on);if(!Se(i)||!Se(l))return null;var{chartName:d,defaultTooltipEventType:g,validateTooltipEventTypes:h,tooltipPayloadSearcher:y}=r,c={chartName:d,defaultTooltipEventType:g,validateTooltipEventTypes:h,tooltipPayloadSearcher:y,eventEmitter:void 0};return s.createElement(ur,{preloadedState:{options:c},reduxStoreName:(a=n.id)!==null&&a!==void 0?a:d},s.createElement(dr,{chartData:n.data}),s.createElement(pr,{width:i,height:l,layout:u,margin:n.margin}),s.createElement(vr,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),s.createElement(ln,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),s.createElement(mr,he({width:i,height:l},m,{ref:t})))}),mn=["item"],fn={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},yn=s.forwardRef((e,r)=>{var t=oe(e,fn);return s.createElement(vn,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:mn,tooltipPayloadSearcher:fr,categoricalChartProps:t,ref:r})});async function qe(e){const{data:r}=await mt.post("/ai/insight",{avgSleep:e.avgSleep,exerciseDays:e.exerciseDays,avgWater:e.avgWater,exerciseType:e.exerciseType??"other"},{responseType:"text"});return r}function Ue(e,r){if(!r.length)return;const t=Object.keys(r[0]),a=m=>{const d=String(m??"");return d.includes(",")||d.includes('"')||d.includes(`
`)?'"'+d.replace(/"/g,'""')+'"':d},n=[t.join(",")].concat(r.map(m=>t.map(d=>a(m[d])).join(","))).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(i),u=document.createElement("a");u.href=l,u.download=e,u.click(),URL.revokeObjectURL(l)}function On(){const[e,r]=s.useState("weekly"),[t,a]=s.useState(null),[n,i]=s.useState(null),[l,u]=s.useState(null),[m,d]=s.useState(""),[g,h]=s.useState(!1),y={WALK:"#34CF5D",RUN:"#269B61",GYM:"#E8FC58",ETC:"#93C5FD",other:"#A1A1AA"},c=s.useMemo(()=>{if(!t)return null;const p=t.data,P=t.summary?.sleepAvg??0,w=t.summary?.waterTotal??0,T=t.summary?.exerciseCount??0,j={};p.forEach(f=>{const b=f.exerciseType??"other";j[b]=(j[b]??0)+(f.exercise||f.exerciseMinutes?1:0)});const S=Object.entries(j).map(([f,b])=>({name:f,value:b})),A=p.reduce((f,b)=>(b.sleep??0)>(f.sleep??0)?b:f,p[0]??{}),v=p.reduce((f,b)=>(b.sleep??0)<(f.sleep??0)?b:f,p[0]??{});return{sleepAvg:P,waterTotal:w,exerciseCount:T,distArr:S,maxSleep:A,minSleep:v}},[t]);s.useEffect(()=>{(async()=>{if(t)try{h(!0);const p=t.data??[],P=t.summary?.sleepAvg??0,w=t.summary?.exerciseCount??0,T=p.length>0?Math.round(p.reduce((v,f)=>v+(f.water??0),0)/p.length):0,j={};p.forEach(v=>{const f=v.exerciseType??"other";j[f]=(j[f]??0)+1});const S=Object.entries(j).sort((v,f)=>f[1]-v[1])[0]?.[0]??"other",A=await qe({avgSleep:Number(P)||0,exerciseDays:Number(w)||0,avgWater:Number(T)||0,exerciseType:S});d(A)}catch{d("AI가 현재 비활성화되어 있습니다. 키 설정 후 사용해 주세요.")}finally{h(!1)}})()},[t]);const x=async()=>{if(t)try{h(!0);const p=t.data??[],P=t.summary?.sleepAvg??0,w=t.summary?.exerciseCount??0,T=p.length>0?Math.round(p.reduce((v,f)=>v+(f.water??0),0)/p.length):0,j={};p.forEach(v=>{const f=v.exerciseType??"other";j[f]=(j[f]??0)+1});const S=Object.entries(j).sort((v,f)=>f[1]-v[1])[0]?.[0]??"other",A=await qe({avgSleep:Number(P)||0,exerciseDays:Number(w)||0,avgWater:Number(T)||0,exerciseType:S});d(A)}catch{d("AI가 현재 비활성화되어 있습니다. 키 설정 후 사용해 주세요.")}finally{h(!1)}};return s.useEffect(()=>{(async()=>{try{a(await yr()),i(await gr())}catch(p){u(p?.message??"데이터를 불러오지 못했습니다.")}})()},[]),o.jsxs(xr,{title:"통계",subtitle:"패턴을 발견하고 개선하세요",children:[o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx(X,{variant:e==="weekly"?"primary":"ghost",onClick:()=>r("weekly"),children:"주간"}),o.jsx(X,{variant:e==="monthly"?"primary":"ghost",onClick:()=>r("monthly"),children:"월간"}),e==="weekly"&&t&&o.jsx(X,{variant:"ghost",onClick:()=>Ue("weekly.csv",t.data),children:"CSV 내보내기"}),e==="monthly"&&n&&o.jsx(X,{variant:"ghost",onClick:()=>Ue("monthly.csv",n),children:"CSV 내보내기"})]}),l&&o.jsx(jr,{message:l}),o.jsxs("div",{className:"modern-card",style:{borderLeft:"4px solid #667eea",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",marginTop:8},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8,justifyContent:"space-between"},children:[o.jsx("strong",{children:"AI 인사이트"}),e==="weekly"&&t&&o.jsx(X,{variant:"ghost",onClick:x,disabled:g,children:g?"분석 중...":"다시 분석"})]}),o.jsx("div",{style:{lineHeight:1.6,whiteSpace:"pre-line"},children:e!=="weekly"?"주간 탭에서 인사이트가 제공됩니다.":t?g?"AI가 분석 중입니다...":m||"AI가 현재 비활성화되어 있습니다.":"주간 데이터를 불러오는 중이거나 데이터가 없습니다."})]}),e==="weekly"&&t&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"modern-card",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[o.jsxs("div",{className:"kpi",style:{borderTop:"4px solid var(--green-700)",textAlign:"center"},children:[o.jsx("div",{className:"kpi-title",children:"평균 수면"}),o.jsxs("div",{className:"kpi-value",children:[c?.sleepAvg??0," h"]})]}),o.jsxs("div",{className:"kpi",style:{borderTop:"4px solid var(--green-500)",textAlign:"center"},children:[o.jsx("div",{className:"kpi-title",children:"운동한 날"}),o.jsxs("div",{className:"kpi-value",children:[c?.exerciseCount??0," 일"]})]}),o.jsxs("div",{className:"kpi",style:{borderTop:"4px solid var(--lime-300)",textAlign:"center"},children:[o.jsx("div",{className:"kpi-title",children:"총 물 섭취"}),o.jsxs("div",{className:"kpi-value",children:[(c?.waterTotal??0).toLocaleString()," ml"]})]})]}),o.jsxs("div",{className:"modern-card",style:{height:360},children:[o.jsxs("div",{style:{marginBottom:8},children:["주간 수면/물 추이 (",t.range[0]," ~ ",t.range[1],")"]}),o.jsx(Ee,{width:"100%",height:280,children:o.jsxs(hr,{data:t.data,children:[o.jsx(br,{strokeDasharray:"3 3",stroke:"#E8FCC5"}),o.jsx(Pr,{dataKey:"date",tickFormatter:p=>p.slice(5)}),o.jsx(se,{yAxisId:"left"}),o.jsx(se,{yAxisId:"right",orientation:"right"}),o.jsx(ke,{}),o.jsx(Ce,{yAxisId:"left",type:"monotone",dataKey:"sleep",stroke:"#34CF5D",name:"수면(h)"}),o.jsx(Ce,{yAxisId:"right",type:"monotone",dataKey:"water",stroke:"#269B61",name:"물(ml)"})]})})]}),o.jsxs("div",{className:"modern-card",style:{display:"grid",gap:8},children:[o.jsx("strong",{children:"운동 타입 분포"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"300px 1fr",alignItems:"center",gap:12},children:[o.jsx(Ee,{width:300,height:220,children:o.jsxs(yn,{children:[o.jsx(ut,{data:c?.distArr??[],dataKey:"value",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:(c?.distArr??[]).map((p,P)=>o.jsx(ue,{fill:y[p.name]??y.other},`cell-${P}`))}),o.jsx(ke,{})]})}),o.jsxs("div",{className:"muted",children:[o.jsxs("div",{children:["최고 수면: ",o.jsx("strong",{children:c?.maxSleep?.date})," (",c?.maxSleep?.sleep??0,"h)"]}),o.jsxs("div",{children:["최저 수면: ",o.jsx("strong",{children:c?.minSleep?.date})," (",c?.minSleep?.sleep??0,"h)"]})]})]})]})]}),e==="monthly"&&n&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"modern-card",children:[o.jsx("div",{style:{marginBottom:8},children:"월간 달력(등록 여부)"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:6},children:n.map(p=>o.jsx("div",{style:{padding:8,textAlign:"center",borderRadius:8,background:p.hasRoutine?"rgba(38,155,97,0.3)":"rgba(255,255,255,0.05)"},children:o.jsx("div",{style:{fontSize:12},children:p.date.slice(8)})},p.date))})]}),o.jsxs("div",{className:"grid-12",children:[o.jsxs("div",{className:"col-4 kpi",style:{borderTop:"4px solid var(--green-700)"},children:[o.jsx("div",{className:"kpi-title",children:"기록한 날"}),o.jsxs("div",{className:"kpi-value",children:[n.filter(p=>p.hasRoutine).length," 일"]})]}),o.jsxs("div",{className:"col-8 kpi",style:{borderTop:"4px solid var(--green-500)"},children:[o.jsx("div",{className:"kpi-title",children:"빈도"}),o.jsx("div",{className:"muted",children:"초록은 기록된 날, 회색은 미기록"})]})]})]}),e==="weekly"&&!t&&!l&&o.jsx(De,{message:"주간 데이터를 불러오는 중입니다..."}),e==="monthly"&&!n&&!l&&o.jsx(De,{message:"월간 데이터를 불러오는 중입니다..."})]})}export{On as default};
