import{r as l,T as vt,j as s,B as Q}from"./index-BkDMzZUb.js";import{b as pt,c as ee,f as z,d as q,u as Ue,e as E,p as oe,g as mt,i as ft,s as V,h as yt,j as gt,k as He,l as ht,m as bt,n as W,o as Pt,q as Xe,r as Ot,t as jt,v as xt,x as At,y as wt,z as Tt,A as ze,B as Et,D as se,E as Ze,F as St,J as Je,G,H as Y,S as kt,I as Ct,K as U,M as Dt,N as Rt,O as It,P as Qe,Q as Nt,U as Lt,V as et,W as K,Y as _t,Z as $t,_ as Mt,$ as Kt,a0 as Te,a1 as te,a2 as me,a3 as Wt,a4 as Bt,a5 as Ft,a6 as Gt,a7 as Yt,a8 as Vt,a9 as qt,aa as X,ab as Ut,ac as Ht,ad as Xt,ae as zt,af as Zt,ag as Jt,ah as Qt,ai as er,aj as tr,ak as rr,al as ar,am as nr,an as ir,ao as lr,ap as I,aq as or,ar as Ee,as as sr,at as cr,au as ur,av as dr,aw as vr,ax as pr,w as mr,ay as fr,R as Se,L as yr,C as gr,X as hr,T as ke,a as Ce}from"./stats-DkWtyZ2s.js";import{S as br}from"./Section-Du_QrB0-.js";import{a as Pr,E as De}from"./State-DDP_uBHZ.js";import"./format-Cc2PyARz.js";import"./startOfMonth-xYZtRiky.js";const tt=Math.cos,re=Math.sin,N=Math.sqrt,ae=Math.PI,ce=2*ae,be={draw(e,r){const t=N(r/ae);e.moveTo(t,0),e.arc(0,0,t,0,ce)}},Or={draw(e,r){const t=N(r/5)/2;e.moveTo(-3*t,-t),e.lineTo(-t,-t),e.lineTo(-t,-3*t),e.lineTo(t,-3*t),e.lineTo(t,-t),e.lineTo(3*t,-t),e.lineTo(3*t,t),e.lineTo(t,t),e.lineTo(t,3*t),e.lineTo(-t,3*t),e.lineTo(-t,t),e.lineTo(-3*t,t),e.closePath()}},rt=N(1/3),jr=rt*2,xr={draw(e,r){const t=N(r/jr),a=t*rt;e.moveTo(0,-t),e.lineTo(a,0),e.lineTo(0,t),e.lineTo(-a,0),e.closePath()}},Ar={draw(e,r){const t=N(r),a=-t/2;e.rect(a,a,t,t)}},wr=.8908130915292852,at=re(ae/10)/re(7*ae/10),Tr=re(ce/10)*at,Er=-tt(ce/10)*at,Sr={draw(e,r){const t=N(r*wr),a=Tr*t,n=Er*t;e.moveTo(0,-t),e.lineTo(a,n);for(let i=1;i<5;++i){const o=ce*i/5,c=tt(o),p=re(o);e.lineTo(p*t,-c*t),e.lineTo(c*a-p*n,p*a+c*n)}e.closePath()}},de=N(3),kr={draw(e,r){const t=-N(r/(de*3));e.moveTo(0,t*2),e.lineTo(-de*t,-t),e.lineTo(de*t,-t),e.closePath()}},k=-.5,C=N(3)/2,fe=1/N(12),Cr=(fe/2+1)*3,Dr={draw(e,r){const t=N(r/Cr),a=t/2,n=t*fe,i=a,o=t*fe+t,c=-i,p=o;e.moveTo(a,n),e.lineTo(i,o),e.lineTo(c,p),e.lineTo(k*a-C*n,C*a+k*n),e.lineTo(k*i-C*o,C*i+k*o),e.lineTo(k*c-C*p,C*c+k*p),e.lineTo(k*a+C*n,k*n-C*a),e.lineTo(k*i+C*o,k*o-C*i),e.lineTo(k*c+C*p,k*p-C*c),e.closePath()}};function Rr(e,r){let t=null,a=pt(n);e=typeof e=="function"?e:ee(e||be),r=typeof r=="function"?r:ee(r===void 0?64:+r);function n(){let i;if(t||(t=i=a()),e.apply(this,arguments).draw(t,+r.apply(this,arguments)),i)return t=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:ee(i),n):e},n.size=function(i){return arguments.length?(r=typeof i=="function"?i:ee(+i),n):r},n.context=function(i){return arguments.length?(t=i??null,n):t},n}var Ir=["type","size","sizeType"];function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ye.apply(null,arguments)}function Re(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function Ie(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Re(Object(t),!0).forEach(function(a){Nr(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Re(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Nr(e,r,t){return(r=Lr(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Lr(e){var r=_r(e,"string");return typeof r=="symbol"?r:r+""}function _r(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function $r(e,r){if(e==null)return{};var t,a,n=Mr(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Mr(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}var nt={symbolCircle:be,symbolCross:Or,symbolDiamond:xr,symbolSquare:Ar,symbolStar:Sr,symbolTriangle:kr,symbolWye:Dr},Kr=Math.PI/180,Wr=e=>{var r="symbol".concat(Ue(e));return nt[r]||be},Br=(e,r,t)=>{if(r==="area")return e;switch(t){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Kr;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Fr=(e,r)=>{nt["symbol".concat(Ue(e))]=r},it=e=>{var{type:r="circle",size:t=64,sizeType:a="area"}=e,n=$r(e,Ir),i=Ie(Ie({},n),{},{type:r,size:t,sizeType:a}),o="circle";typeof r=="string"&&(o=r);var c=()=>{var m=Wr(o),d=Rr().type(m).size(Br(t,a,o));return d()},{className:p,cx:u,cy:v}=i,y=z(i,!0);return u===+u&&v===+v&&t===+t?l.createElement("path",ye({},y,{className:q("recharts-symbols",p),transform:"translate(".concat(u,", ").concat(v,")"),d:c()})):null};it.registerSymbol=Fr;var ue=e=>null;ue.displayName="Cell";var lt=e=>e.graphicalItems.polarItems,Gr=E([oe,mt],ft),Pe=E([lt,V,Gr],yt),Yr=E([Pe],gt),Oe=E([Yr,He],ht),Vr=E([Oe,V,Pe],bt),qr=E([Oe,V,Pe],(e,r,t)=>t.length>0?e.flatMap(a=>t.flatMap(n=>{var i,o=W(a,(i=r.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):r?.dataKey!=null?e.map(a=>({value:W(a,r.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),Ne=()=>{},Ur=E([V,Pt,Ne,qr,Ne,Xe,oe],Ot),ot=E([V,Xe,Oe,Vr,jt,oe,Ur],xt),Hr=E([ot,V,At],wt);E([V,ot,Hr,oe],Tt);function Le(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function _e(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Le(Object(t),!0).forEach(function(a){Xr(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Le(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Xr(e,r,t){return(r=zr(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function zr(e){var r=Zr(e,"string");return typeof r=="symbol"?r:r+""}function Zr(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Jr=(e,r)=>r,je=E([lt,Jr],(e,r)=>e.filter(t=>t.type==="pie").find(t=>t.id===r)),Qr=[],xe=(e,r,t)=>t?.length===0?Qr:t,st=E([He,je,xe],(e,r,t)=>{var{chartData:a}=e;if(r!=null){var n;if(r?.data!=null&&r.data.length>0?n=r.data:n=a,(!n||!n.length)&&t!=null&&(n=t.map(i=>_e(_e({},r.presentationProps),i.props))),n!=null)return n}}),ea=E([st,je,xe],(e,r,t)=>{if(!(e==null||r==null))return e.map((a,n)=>{var i,o=W(a,r.nameKey,r.name),c;return t!=null&&(i=t[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=t[n].props.fill:typeof a=="object"&&a!=null&&"fill"in a?c=a.fill:c=r.fill,{value:ze(o,r.dataKey),color:c,payload:a,type:r.legendType}})}),ta=E([st,je,xe,Et],(e,r,t,a)=>{if(!(r==null||e==null))return Ga({offset:a,pieSettings:r,displayedData:e,cells:t})}),ve={},$e;function ra(){return $e||($e=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a}e.isPlainObject=r})(ve)),ve}var pe,Me;function aa(){return Me||(Me=1,pe=ra().isPlainObject),pe}var na=aa();const ia=vt(na);function Ke(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function We(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ke(Object(t),!0).forEach(function(a){la(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function la(e,r,t){return(r=oa(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function oa(e){var r=sa(e,"string");return typeof r=="symbol"?r:r+""}function sa(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ne.apply(null,arguments)}var Be=(e,r,t,a,n)=>{var i=t-a,o;return o="M ".concat(e,",").concat(r),o+="L ".concat(e+t,",").concat(r),o+="L ".concat(e+t-i/2,",").concat(r+n),o+="L ".concat(e+t-i/2-a,",").concat(r+n),o+="L ".concat(e,",").concat(r," Z"),o},ca={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ua=e=>{var r=se(e,ca),{x:t,y:a,upperWidth:n,lowerWidth:i,height:o,className:c}=r,{animationEasing:p,animationDuration:u,animationBegin:v,isUpdateAnimationActive:y}=r,m=l.useRef(),[d,g]=l.useState(-1),O=l.useRef(n),j=l.useRef(i),S=l.useRef(o),P=l.useRef(t),b=l.useRef(a),L=Ze(e,"trapezoid-");if(l.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var T=m.current.getTotalLength();T&&g(T)}catch{}},[]),t!==+t||a!==+a||n!==+n||i!==+i||o!==+o||n===0&&i===0||o===0)return null;var w=q("recharts-trapezoid",c);if(!y)return l.createElement("g",null,l.createElement("path",ne({},z(r,!0),{className:w,d:Be(t,a,n,i,o)})));var f=O.current,x=j.current,A=S.current,D=P.current,R=b.current,_="0px ".concat(d===-1?1:d,"px"),$="".concat(d,"px 0px"),F=St(["strokeDasharray"],u,p);return l.createElement(Je,{animationId:L,key:L,canBegin:d>0,duration:u,easing:p,isActive:y,begin:v},T=>{var M=G(f,n,T),H=G(x,i,T),Z=G(A,o,T),J=G(D,t,T),we=G(R,a,T);m.current&&(O.current=M,j.current=H,S.current=Z,P.current=J,b.current=we);var dt=T>0?{transition:F,strokeDasharray:$}:{strokeDasharray:_};return l.createElement("path",ne({},z(r,!0),{className:w,d:Be(J,we,M,H,Z),ref:m,style:We(We({},dt),r.style)}))})},da=["option","shapeType","propTransformer","activeClassName","isActive"];function va(e,r){if(e==null)return{};var t,a,n=pa(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function pa(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}function Fe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function ie(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Fe(Object(t),!0).forEach(function(a){ma(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fe(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function ma(e,r,t){return(r=fa(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function fa(e){var r=ya(e,"string");return typeof r=="symbol"?r:r+""}function ya(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ga(e,r){return ie(ie({},r),e)}function ha(e,r){return e==="symbols"}function Ge(e){var{shapeType:r,elementProps:t}=e;switch(r){case"rectangle":return l.createElement(Ct,t);case"trapezoid":return l.createElement(ua,t);case"sector":return l.createElement(kt,t);case"symbols":if(ha(r))return l.createElement(it,t);break;default:return null}}function ba(e){return l.isValidElement(e)?e.props:e}function Pa(e){var{option:r,shapeType:t,propTransformer:a=ga,activeClassName:n="recharts-active-shape",isActive:i}=e,o=va(e,da),c;if(l.isValidElement(r))c=l.cloneElement(r,ie(ie({},o),ba(r)));else if(typeof r=="function")c=r(o);else if(ia(r)&&typeof r!="boolean"){var p=a(r,o);c=l.createElement(Ge,{shapeType:t,elementProps:p})}else{var u=o;c=l.createElement(Ge,{shapeType:t,elementProps:u})}return i?l.createElement(Y,{className:n},c):c}var Oa=(e,r)=>{var t=U();return(a,n)=>i=>{e?.(a,n,i),t(Dt({activeIndex:String(n),activeDataKey:r,activeCoordinate:a.tooltipPosition}))}},ja=e=>{var r=U();return(t,a)=>n=>{e?.(t,a,n),r(Rt())}},xa=(e,r)=>{var t=U();return(a,n)=>i=>{e?.(a,n,i),t(It({activeIndex:String(n),activeDataKey:r,activeCoordinate:a.tooltipPosition}))}},Aa=["onMouseEnter","onClick","onMouseLeave"],wa=["id"],Ta=["id"];function Ae(e,r){if(e==null)return{};var t,a,n=Ea(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Ea(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}function Ye(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ye(Object(t),!0).forEach(function(a){Sa(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ye(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Sa(e,r,t){return(r=ka(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ka(e){var r=Ca(e,"string");return typeof r=="symbol"?r:r+""}function Ca(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},B.apply(null,arguments)}function Da(e){var r=l.useMemo(()=>et(e.children,ue),[e.children]),t=K(a=>ea(a,e.id,r));return t==null?null:l.createElement(_t,{legendPayload:t})}function Ra(e){var{dataKey:r,nameKey:t,sectors:a,stroke:n,strokeWidth:i,fill:o,name:c,hide:p,tooltipType:u}=e;return{dataDefinedOnItem:a.map(v=>v.tooltipPayload),positions:a.map(v=>v.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:o,dataKey:r,nameKey:t,name:ze(c,r),hide:p,type:u,color:o,unit:""}}}var Ia=(e,r)=>e>r?"start":e<r?"end":"middle",Na=(e,r,t)=>typeof r=="function"?X(r(e),t,t*.8):X(r,t,t*.8),La=(e,r,t)=>{var{top:a,left:n,width:i,height:o}=r,c=qt(i,o),p=n+X(e.cx,i,i/2),u=a+X(e.cy,o,o/2),v=X(e.innerRadius,c,0),y=Na(t,e.outerRadius,c),m=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:p,cy:u,innerRadius:v,outerRadius:y,maxRadius:m}},_a=(e,r)=>{var t=te(r-e),a=Math.min(Math.abs(r-e),360);return t*a};function $a(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Ma=(e,r)=>{if(l.isValidElement(e))return l.cloneElement(e,r);if(typeof e=="function")return e(r);var t=q("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return l.createElement(Ut,B({},r,{type:"linear",className:t}))},Ka=(e,r,t)=>{if(l.isValidElement(e))return l.cloneElement(e,r);var a=t;if(typeof e=="function"&&(a=e(r),l.isValidElement(a)))return a;var n=q("recharts-pie-label-text",$a(e));return l.createElement(Ht,B({},r,{alignmentBaseline:"middle",className:n}),a)};function Wa(e){var{sectors:r,props:t,showLabels:a}=e,{label:n,labelLine:i,dataKey:o}=t;if(!a||!n||!r)return null;var c=Qe(t),p=z(n,!1),u=z(i,!1),v=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,y=r.map((m,d)=>{var g=(m.startAngle+m.endAngle)/2,O=me(m.cx,m.cy,m.outerRadius+v,g),j=h(h(h(h({},c),m),{},{stroke:"none"},p),{},{index:d,textAnchor:Ia(O.x,m.cx)},O),S=h(h(h(h({},c),m),{},{fill:"none",stroke:m.fill},u),{},{index:d,points:[me(m.cx,m.cy,m.outerRadius,g),O],key:"line"});return l.createElement(Y,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(d)},i&&Ma(i,S),Ka(n,j,W(m,o)))});return l.createElement(Y,{className:"recharts-pie-labels"},y)}function Ba(e){var{sectors:r,props:t,showLabels:a}=e,{label:n}=t;return typeof n=="object"&&n!=null&&"position"in n?l.createElement(Vt,{label:t.label}):l.createElement(Wa,{sectors:r,props:t,showLabels:a})}function Fa(e){var{sectors:r,activeShape:t,inactiveShape:a,allOtherPieProps:n}=e,i=K(Bt),{onMouseEnter:o,onClick:c,onMouseLeave:p}=n,u=Ae(n,Aa),v=Oa(o,n.dataKey),y=ja(p),m=xa(c,n.dataKey);return r==null||r.length===0?null:l.createElement(l.Fragment,null,r.map((d,g)=>{if(d?.startAngle===0&&d?.endAngle===0&&r.length!==1)return null;var O=t&&String(g)===i,j=i?a:null,S=O?t:j,P=h(h({},d),{},{stroke:d.stroke,tabIndex:-1,[Gt]:g,[Ft]:n.dataKey});return l.createElement(Y,B({tabIndex:-1,className:"recharts-pie-sector"},Yt(u,d,g),{onMouseEnter:v(d,g),onMouseLeave:y(d,g),onClick:m(d,g),key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(g)}),l.createElement(Pa,B({option:S,isActive:O,shapeType:"sector"},P)))}))}function Ga(e){var r,{pieSettings:t,displayedData:a,cells:n,offset:i}=e,{cornerRadius:o,startAngle:c,endAngle:p,dataKey:u,nameKey:v,tooltipType:y}=t,m=Math.abs(t.minAngle),d=_a(c,p),g=Math.abs(d),O=a.length<=1?0:(r=t.paddingAngle)!==null&&r!==void 0?r:0,j=a.filter(f=>W(f,u,0)!==0).length,S=(g>=360?j:j-1)*O,P=g-j*m-S,b=a.reduce((f,x)=>{var A=W(x,u,0);return f+(Te(A)?A:0)},0),L;if(b>0){var w;L=a.map((f,x)=>{var A=W(f,u,0),D=W(f,v,x),R=La(t,i,f),_=(Te(A)?A:0)/b,$,F=h(h({},f),n&&n[x]&&n[x].props);x?$=w.endAngle+te(d)*O*(A!==0?1:0):$=c;var T=$+te(d)*((A!==0?m:0)+_*P),M=($+T)/2,H=(R.innerRadius+R.outerRadius)/2,Z=[{name:D,value:A,payload:F,dataKey:u,type:y}],J=me(R.cx,R.cy,H,M);return w=h(h(h(h({},t.presentationProps),{},{percent:_,cornerRadius:o,name:D,tooltipPayload:Z,midAngle:M,middleRadius:H,tooltipPosition:J},F),R),{},{value:W(f,u),startAngle:$,endAngle:T,payload:F,paddingAngle:te(d)*O}),w})}return L}function Ya(e){var{showLabels:r,sectors:t,children:a}=e,n=l.useMemo(()=>!r||!t?[]:t.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[t,r]);return l.createElement(Wt,{value:r?n:void 0},a)}function Va(e){var{props:r,previousSectorsRef:t}=e,{sectors:a,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:c,activeShape:p,inactiveShape:u,onAnimationStart:v,onAnimationEnd:y}=r,m=Ze(r,"recharts-pie-"),d=t.current,[g,O]=l.useState(!1),j=l.useCallback(()=>{typeof y=="function"&&y(),O(!1)},[y]),S=l.useCallback(()=>{typeof v=="function"&&v(),O(!0)},[v]);return l.createElement(Ya,{showLabels:!g,sectors:a},l.createElement(Je,{animationId:m,begin:i,duration:o,isActive:n,easing:c,onAnimationStart:S,onAnimationEnd:j,key:m},P=>{var b=[],L=a&&a[0],w=L?.startAngle;return a?.forEach((f,x)=>{var A=d&&d[x],D=x>0?Kt(f,"paddingAngle",0):0;if(A){var R=G(A.endAngle-A.startAngle,f.endAngle-f.startAngle,P),_=h(h({},f),{},{startAngle:w+D,endAngle:w+R+D});b.push(_),w=_.endAngle}else{var{endAngle:$,startAngle:F}=f,T=G(0,$-F,P),M=h(h({},f),{},{startAngle:w+D,endAngle:w+T+D});b.push(M),w=M.endAngle}}),t.current=b,l.createElement(Y,null,l.createElement(Fa,{sectors:b,activeShape:p,inactiveShape:u,allOtherPieProps:r}))}),l.createElement(Ba,{showLabels:!g,sectors:a,props:r}),r.children)}var qa={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Mt.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Ua(e){var{id:r}=e,t=Ae(e,wa),{hide:a,className:n,rootTabIndex:i}=e,o=l.useMemo(()=>et(e.children,ue),[e.children]),c=K(v=>ta(v,r,o)),p=l.useRef(null),u=q("recharts-pie",n);return a||c==null?(p.current=null,l.createElement(Y,{tabIndex:i,className:u})):l.createElement(l.Fragment,null,l.createElement($t,{fn:Ra,args:h(h({},e),{},{sectors:c})}),l.createElement(Y,{tabIndex:i,className:u},l.createElement(Va,{props:h(h({},t),{},{sectors:c}),previousSectorsRef:p})))}function ct(e){var r=se(e,qa),{id:t}=r,a=Ae(r,Ta),n=Qe(a);return l.createElement(Nt,{id:t,type:"pie"},i=>l.createElement(l.Fragment,null,l.createElement(Lt,{type:"pie",id:i,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:n}),l.createElement(Da,B({},a,{id:i})),l.createElement(Ua,B({},a,{id:i}))))}ct.displayName="Pie";var Ha=e=>{var{ticks:r,label:t,labelGapWithTick:a=5,tickSize:n=0,tickMargin:i=0}=e,o=0;if(r){r.forEach(v=>{if(v){var y=v.getBoundingClientRect();y.width>o&&(o=y.width)}});var c=t?t.getBoundingClientRect().width:0,p=n+i,u=o+p+c+(t?a:0);return Math.round(u)}return 0},Xa=["dangerouslySetInnerHTML","ticks"],za=["id"];function ut(e,r,t){return(r=Za(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Za(e){var r=Ja(e,"string");return typeof r=="symbol"?r:r+""}function Ja(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ge.apply(null,arguments)}function Ve(e,r){if(e==null)return{};var t,a,n=Qa(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Qa(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}function en(e){var r=U();return l.useEffect(()=>(r(Xt(e)),()=>{r(zt(e))}),[e,r]),null}var tn=e=>{var r,{yAxisId:t,className:a,width:n,label:i}=e,o=l.useRef(null),c=l.useRef(null),p=K(Zt),u=Jt(),v=U(),y="yAxis",m=K(f=>Qt(f,y,t,u)),d=K(f=>er(f,t)),g=K(f=>tr(f,t)),O=K(f=>rr(f,y,t,u)),j=K(f=>ar(f,t));if(l.useLayoutEffect(()=>{var f;if(!(n!=="auto"||!d||nr(i)||l.isValidElement(i)||j==null)){var x=o.current,A=x==null||(f=x.tickRefs)===null||f===void 0?void 0:f.current,{tickSize:D,tickMargin:R}=x.props,_=Ha({ticks:A,label:c.current,labelGapWithTick:5,tickSize:D,tickMargin:R});Math.round(d.width)!==Math.round(_)&&v(ir({id:t,width:_}))}},[o,o==null||(r=o.current)===null||r===void 0||(r=r.tickRefs)===null||r===void 0?void 0:r.current,d?.width,d,v,i,t,n]),d==null||g==null||j==null)return null;var{dangerouslySetInnerHTML:S,ticks:P}=e,b=Ve(e,Xa),{id:L}=j,w=Ve(j,za);return l.createElement(lr,ge({},b,w,{ref:o,labelRef:c,scale:m,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:d.width,height:d.height,className:q("recharts-".concat(y," ").concat(y),a),viewBox:p,ticks:O}))},rn=e=>{var r,t,a,n,i;return l.createElement(l.Fragment,null,l.createElement(en,{interval:(r=e.interval)!==null&&r!==void 0?r:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(t=e.includeHidden)!==null&&t!==void 0?t:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),l.createElement(tn,e))},an={allowDataOverflow:I.allowDataOverflow,allowDecimals:I.allowDecimals,allowDuplicatedCategory:I.allowDuplicatedCategory,hide:!1,mirror:I.mirror,orientation:I.orientation,padding:I.padding,reversed:I.reversed,scale:I.scale,tickCount:I.tickCount,type:I.type,width:I.width,yAxisId:0};class le extends l.Component{render(){return l.createElement(rn,this.props)}}ut(le,"displayName","YAxis");ut(le,"defaultProps",an);function nn(e){var r=U();return l.useEffect(()=>{r(or(e))},[r,e]),null}var ln=["width","height","layout"];function he(){return he=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},he.apply(null,arguments)}function on(e,r){if(e==null)return{};var t,a,n=sn(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function sn(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}var cn={top:5,right:5,bottom:5,left:5},un={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:cn,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},dn=l.forwardRef(function(r,t){var a,n=se(r.categoricalChartProps,un),{width:i,height:o,layout:c}=n,p=on(n,ln);if(!Ee(i)||!Ee(o))return null;var{chartName:u,defaultTooltipEventType:v,validateTooltipEventTypes:y,tooltipPayloadSearcher:m}=r,d={chartName:u,defaultTooltipEventType:v,validateTooltipEventTypes:y,tooltipPayloadSearcher:m,eventEmitter:void 0};return l.createElement(sr,{preloadedState:{options:d},reduxStoreName:(a=n.id)!==null&&a!==void 0?a:u},l.createElement(cr,{chartData:n.data}),l.createElement(ur,{width:i,height:o,layout:c,margin:n.margin}),l.createElement(dr,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),l.createElement(nn,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),l.createElement(vr,he({width:i,height:o},p,{ref:t})))}),vn=["item"],pn={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},mn=l.forwardRef((e,r)=>{var t=se(e,pn);return l.createElement(dn,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:vn,tooltipPayloadSearcher:pr,categoricalChartProps:t,ref:r})});function qe(e,r){if(!r.length)return;const t=Object.keys(r[0]),a=p=>{const u=String(p??"");return u.includes(",")||u.includes('"')||u.includes(`
`)?'"'+u.replace(/"/g,'""')+'"':u},n=[t.join(",")].concat(r.map(p=>t.map(u=>a(p[u])).join(","))).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download=e,c.click(),URL.revokeObjectURL(o)}function On(){const[e,r]=l.useState("weekly"),[t,a]=l.useState(null),[n,i]=l.useState(null),[o,c]=l.useState(null),p={WALK:"#34CF5D",RUN:"#269B61",GYM:"#E8FC58",ETC:"#93C5FD",other:"#A1A1AA"},u=l.useMemo(()=>{if(!t)return null;const v=t.data,y=t.summary?.sleepAvg??0,m=t.summary?.waterTotal??0,d=t.summary?.exerciseCount??0,g={};v.forEach(P=>{const b=P.exerciseType??"other";g[b]=(g[b]??0)+(P.exercise||P.exerciseMinutes?1:0)});const O=Object.entries(g).map(([P,b])=>({name:P,value:b})),j=v.reduce((P,b)=>(b.sleep??0)>(P.sleep??0)?b:P,v[0]??{}),S=v.reduce((P,b)=>(b.sleep??0)<(P.sleep??0)?b:P,v[0]??{});return{sleepAvg:y,waterTotal:m,exerciseCount:d,distArr:O,maxSleep:j,minSleep:S}},[t]);return l.useEffect(()=>{(async()=>{try{a(await mr()),i(await fr())}catch(v){c(v?.message??"데이터를 불러오지 못했습니다.")}})()},[]),s.jsxs(br,{title:"통계",subtitle:"패턴을 발견하고 개선하세요",children:[s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx(Q,{variant:e==="weekly"?"primary":"ghost",onClick:()=>r("weekly"),children:"주간"}),s.jsx(Q,{variant:e==="monthly"?"primary":"ghost",onClick:()=>r("monthly"),children:"월간"}),e==="weekly"&&t&&s.jsx(Q,{variant:"ghost",onClick:()=>qe("weekly.csv",t.data),children:"CSV 내보내기"}),e==="monthly"&&n&&s.jsx(Q,{variant:"ghost",onClick:()=>qe("monthly.csv",n),children:"CSV 내보내기"})]}),o&&s.jsx(Pr,{message:o}),e==="weekly"&&t&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid-12",children:[s.jsxs("div",{className:"col-4 kpi",style:{borderTop:"4px solid var(--green-700)"},children:[s.jsx("div",{className:"kpi-title",children:"평균 수면"}),s.jsxs("div",{className:"kpi-value",children:[u?.sleepAvg??0," h"]})]}),s.jsxs("div",{className:"col-4 kpi",style:{borderTop:"4px solid var(--green-500)"},children:[s.jsx("div",{className:"kpi-title",children:"운동한 날"}),s.jsxs("div",{className:"kpi-value",children:[u?.exerciseCount??0," 일"]})]}),s.jsxs("div",{className:"col-4 kpi",style:{borderTop:"4px solid var(--lime-300)"},children:[s.jsx("div",{className:"kpi-title",children:"총 물 섭취"}),s.jsxs("div",{className:"kpi-value",children:[(u?.waterTotal??0).toLocaleString()," ml"]})]})]}),s.jsxs("div",{className:"modern-card",style:{height:360},children:[s.jsxs("div",{style:{marginBottom:8},children:["주간 수면/물 추이 (",t.range[0]," ~ ",t.range[1],")"]}),s.jsx(Se,{width:"100%",height:280,children:s.jsxs(yr,{data:t.data,children:[s.jsx(gr,{strokeDasharray:"3 3",stroke:"#E8FCC5"}),s.jsx(hr,{dataKey:"date",tickFormatter:v=>v.slice(5)}),s.jsx(le,{yAxisId:"left"}),s.jsx(le,{yAxisId:"right",orientation:"right"}),s.jsx(ke,{}),s.jsx(Ce,{yAxisId:"left",type:"monotone",dataKey:"sleep",stroke:"#34CF5D",name:"수면(h)"}),s.jsx(Ce,{yAxisId:"right",type:"monotone",dataKey:"water",stroke:"#269B61",name:"물(ml)"})]})})]}),s.jsxs("div",{className:"modern-card",style:{display:"grid",gap:8},children:[s.jsx("strong",{children:"운동 타입 분포"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"300px 1fr",alignItems:"center",gap:12},children:[s.jsx(Se,{width:300,height:220,children:s.jsxs(mn,{children:[s.jsx(ct,{data:u?.distArr??[],dataKey:"value",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:(u?.distArr??[]).map((v,y)=>s.jsx(ue,{fill:p[v.name]??p.other},`cell-${y}`))}),s.jsx(ke,{})]})}),s.jsxs("div",{className:"muted",children:[s.jsxs("div",{children:["최고 수면: ",s.jsx("strong",{children:u?.maxSleep?.date})," (",u?.maxSleep?.sleep??0,"h)"]}),s.jsxs("div",{children:["최저 수면: ",s.jsx("strong",{children:u?.minSleep?.date})," (",u?.minSleep?.sleep??0,"h)"]})]})]})]})]}),e==="monthly"&&n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"modern-card",children:[s.jsx("div",{style:{marginBottom:8},children:"월간 달력(등록 여부)"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:6},children:n.map(v=>s.jsx("div",{style:{padding:8,textAlign:"center",borderRadius:8,background:v.hasRoutine?"rgba(38,155,97,0.3)":"rgba(255,255,255,0.05)"},children:s.jsx("div",{style:{fontSize:12},children:v.date.slice(8)})},v.date))})]}),s.jsxs("div",{className:"grid-12",children:[s.jsxs("div",{className:"col-4 kpi",style:{borderTop:"4px solid var(--green-700)"},children:[s.jsx("div",{className:"kpi-title",children:"기록한 날"}),s.jsxs("div",{className:"kpi-value",children:[n.filter(v=>v.hasRoutine).length," 일"]})]}),s.jsxs("div",{className:"col-8 kpi",style:{borderTop:"4px solid var(--green-500)"},children:[s.jsx("div",{className:"kpi-title",children:"빈도"}),s.jsx("div",{className:"muted",children:"초록은 기록된 날, 회색은 미기록"})]})]})]}),e==="weekly"&&!t&&!o&&s.jsx(De,{message:"주간 데이터를 불러오는 중입니다..."}),e==="monthly"&&!n&&!o&&s.jsx(De,{message:"월간 데이터를 불러오는 중입니다..."})]})}export{On as default};
